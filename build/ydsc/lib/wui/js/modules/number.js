/**
 *  - v1.0.0  License By 
 * 研发技术中心-技术研发部 
 */
!function(a,n){"use strict";return n.changeNUM={init:function(a,n){var e=a[0];this.loadHTML(e,n),this.blur(e,n)},loadHTML:function(a,n){var e=[];("undefined"!=n.defaultNum&&null!=n.defaultNum&&""!=n.defaultNum||0==n.defaultNum&&"undefined"!=n.min&&null!=n.min&&""!=n.min||0==n.min&&"undefined"!=n.max&&null!=n.max&&""!=n.max||0==n.max)&&n.min<=n.max&&(n.defaultNum<=n.min?e.push('<span class="change_click_el change_reduce_click disable_change">-</span>'):n.min==n.max?(e.push('<span class="change_click_el change_reduce_click disable_change">-</span>'),e.push('<input type="text" class="change_click_num" value="'+n.min+'"/>')):e.push('<span class="change_click_el change_reduce_click">-</span>'),n.min<n.defaultNum&&n.defaultNum<n.max?e.push('<input type="text" class="change_click_num" value="'+n.defaultNum+'"/>'):n.defaultNum<=n.min?e.push('<input type="text" class="change_click_num" value="'+n.min+'"/>'):n.defaultNum>=n.max?e.push('<input type="text" class="change_click_num" value="'+n.max+'"/>'):n.min==n.defaultNum&&n.defaultNum==n.max&&e.push('<input type="text" class="change_click_num" value="'+n.defaultNum+'"/>'),n.defaultNum>=n.max?e.push('<span class="change_click_el change_add_Click disable_change">+</span>'):n.min==n.max?e.push('<span class="change_click_el change_add_Click disable_change">+</span>'):e.push('<span class="change_click_el change_add_Click">+</span>')),$(a).html(e.join("")),this.addNum(a,n),this.reduceNum(a,n)},blur:function(a,n){var e=this,c=$(a).find("input");c.blur(function(){var i=c.val();if(c.val().length>0){var l=/^(0|([1-9]\d*))$/.test(c.val());l||c.val("").focus()}i>=n.max?(c.val(n.max),e.changeStatus(a,"up")):i<=n.min?(c.val(n.min),e.changeStatus(a,"down")):e.changeStatus(a,"middle")})},changeStatus:function(a,n){switch(n){case"up":$(a).find(".change_add_Click").addClass("disable_change").parent().find(".change_reduce_click").removeClass("disable_change");break;case"down":$(a).find(".change_reduce_click").addClass("disable_change").parent().find(".change_add_Click").removeClass("disable_change");break;default:$(a).find(".change_reduce_click").removeClass("disable_change").parent().find(".change_add_Click").removeClass("disable_change")}},addNum:function(a,n){$(a).find(".change_add_Click").off("click").click(function(){if($(this).hasClass("disable_change"))return!1;var e=parseInt($(a).find("input").val());return e>=n.max-1?($(a).find("input").val(n.max),$(this).addClass("disable_change"),!1):(e++,$(this).parent().find(".change_reduce_click").removeClass("disable_change"),void $(a).find("input").val(e))})},reduceNum:function(a,n){$(a).find(".change_reduce_click").off("click").click(function(){if($(this).hasClass("disable_change"))return!1;var e=parseInt($(a).find("input").val());return e<=n.min+1?($(a).find("input").val(n.min),void $(this).addClass("disable_change")):(e--,$(this).parent().find(".change_add_Click").removeClass("disable_change"),void $(a).find("input").val(e))})},removeBind:function(a){$(a).find(".change_add_Click").off("click"),$(a).find(".change_reduce_click").off("click")}}}(window,wui),wui.directive("ui-number",function(){return{scope:{min:"min",max:"max",defaultNum:"default",fn:"~callback"},link:function(a){function n(a){a||c.removeBind(i)}var e=a.scope,c=a.fn.changeNUM,i=a.element;c.init(i,e),e.fn&&e.fn(n)}}});